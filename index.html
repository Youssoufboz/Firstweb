<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>2D Platformer Mobile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: #111;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

/* Canvas */
canvas {
    display: block;
    margin: auto;
    background: #87ceeb;
}

/* Controls */
.controls {
    position: fixed;
    bottom: 15px;
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
}

.left-controls, .right-controls {
    display: flex;
    gap: 15px;
}

.btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(255,255,255,0.2);
    border: 2px solid white;
    color: white;
    font-size: 24px;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
}

.btn:active {
    background: rgba(255,255,255,0.4);
}
</style>
</head>

<body>

<canvas id="game" width="800" height="450"></canvas>

<div class="controls">
    <div class="left-controls">
        <div class="btn" id="left">◀</div>
        <div class="btn" id="right">▶</div>
    </div>
    <div class="right-controls">
        <div class="btn" id="jump">⤒</div>
    </div>
</div>

<script>
/* ===============================
   GAME SETUP
================================ */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const gravity = 0.6;
const input = { left:false, right:false, jump:false };

/* ===============================
   PLAYER
================================ */
const player = {
    x: 50,
    y: 0,
    w: 40,
    h: 50,
    velX: 0,
    velY: 0,
    speed: 5,
    jumping: false
};

/* ===============================
   PLATFORMS
================================ */
const platforms = [
    { x: 0, y: 400, w: 800, h: 50 },
    { x: 200, y: 320, w: 120, h: 20 },
    { x: 400, y: 260, w: 120, h: 20 },
    { x: 600, y: 200, w: 120, h: 20 }
];

/* ===============================
   INPUT (KEYBOARD)
================================ */
document.addEventListener("keydown", e => {
    if (e.code === "ArrowLeft") input.left = true;
    if (e.code === "ArrowRight") input.right = true;
    if (e.code === "Space") input.jump = true;
});
document.addEventListener("keyup", e => {
    if (e.code === "ArrowLeft") input.left = false;
    if (e.code === "ArrowRight") input.right = false;
    if (e.code === "Space") input.jump = false;
});

/* ===============================
   INPUT (TOUCH)
================================ */
function bindButton(id, prop) {
    const btn = document.getElementById(id);
    btn.addEventListener("touchstart", e => {
        e.preventDefault();
        input[prop] = true;
    });
    btn.addEventListener("touchend", () => input[prop] = false);
}

bindButton("left", "left");
bindButton("right", "right");
bindButton("jump", "jump");

/* ===============================
   COLLISION
================================ */
function collide(a, b) {
    return (
        a.x < b.x + b.w &&
        a.x + a.w > b.x &&
        a.y < b.y + b.h &&
        a.y + a.h > b.y
    );
}

/* ===============================
   UPDATE
================================ */
function update() {
    if (input.left) player.velX = -player.speed;
    else if (input.right) player.velX = player.speed;
    else player.velX = 0;

    if (input.jump && !player.jumping) {
        player.velY = -12;
        player.jumping = true;
    }

    player.velY += gravity;
    player.x += player.velX;
    player.y += player.velY;

    for (let p of platforms) {
        if (collide(
            {x:player.x, y:player.y, w:player.w, h:player.h},
            p
        )) {
            if (player.velY > 0) {
                player.y = p.y - player.h;
                player.velY = 0;
                player.jumping = false;
            }
        }
    }

    if (player.y > canvas.height) {
        player.x = 50;
        player.y = 0;
        player.velY = 0;
    }
}

/* ===============================
   DRAW
================================ */
function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle = "#ff4757";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    ctx.fillStyle = "#2f3542";
    platforms.forEach(p =>
        ctx.fillRect(p.x, p.y, p.w, p.h)
    );
}

/* ===============================
   LOOP
================================ */
function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>